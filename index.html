<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>FOOD</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
    <link rel="stylesheet" href="suhi.css">
    <script src="https://cdn.rawgit.com/Keyang/node-csvtojson/d41f44aa/browser/csvtojson.min.js"></script>
</head>

<body>
    <!--Full Page-->
    <div class="container">
        
        <!--TEST TEST TESTING!!!!-->
        
        <!--Top Section-->
        <div class="nav-wrapper">
            <!--Navigation Bar-->
            <div class="left-side">
                <div class="nav-link-wrapper">
                    <a href="suhi_home.html">Home<a/>
                </div>

                <div class="nav-link-wrapper" data-hover="food" active-nav-link>
                    <a href="suhi_food.html"><img src="apple.png" style="height:17px"><a/>
                </div>

                <div class="nav-link-wrapper" data-hover="housing">
                    <a href="suhi_food.html"><img src="house.png" style="height:17px"><a/>
                </div>

                <div class="nav-link-wrapper" data-hover="transportation">
                    <a href="suhi_food.html"><img src="vehicles.png" style="height:17px"><a/>
                </div>

                <div class="nav-link-wrapper" data-hover="legal">
                    <a href="suhi_food.html"><img src="compliant.png" style="height:17px"><a/>
                </div>

                <div class="nav-link-wrapper" data-hover="domestic violence">
                    <a href="suhi_food.html"><img src="helpline.png" style="height:17px"><a/>
                </div>

                <div class="nav-link-wrapper" data-hover="behavioral health">
                    <a href="suhi_food.html"><img src="mental-health.png" style="height:17px"><a/>
                </div>

                <div class="nav-link-wrapper" data-hover="employment">
                    <a href="suhi_food.html"><img src="employment.png" style="height:17px"><a/>
                </div>
            </div>
            <!--Logo-->
            <div class="right-side">
                <div class="brand">
                    <img src="sinai_logo.jpg" style="height:50px">
                </div>
            </div>
        </div>
    </div>

    <!--Content Section-->
    <div class="content-wrapper">
        <!--Table-->
        <div class="table_section">
            <table>
                <thead>
                    <tr>
                        <th>Category</th>
                        <th>Name</th>
                        <th>Contact Person</th>
                        <th>Number</th>
                        <th>Location</th>
                        <th>Web/Email Address</th>
                        <th>Services</th>
                        <th>Notes</th>
                        <th>Hours</th>
                    </tr>
                </thead>
                <tbody id="spreadsheet">
                <!--gets replaced by innerHTML function in script-->
                </tbody>
            </table>
        </div>
    </div>
</body>

<script>
    /*MUST REPLACE WHATEVER GOOGLE SPREADSHEET LINK str "edit?usp=sharing..." with "export?format=csv" to export as csv (comma separated values) file*/
    const url = "https://docs.google.com/spreadsheets/d/1YfvBznLgIqjL8Y1pTXGjhKLxtvQIgw4H/export?format=csv";
    
    spreadsheet.innerHTML = "<p>Loading...</p>";

    //See https://www.npmjs.com/package/csvtojson#browser-usage for csv to json library (added above)
    fetch(url).then(result=>result.text()).then(function(csvtext){
        return csv().fromString(csvtext);
    }).then(function(csv){
        //spreadsheet.innerHTML = "<code>" + JSON.stringify(csv) + "</code>";
        spreadsheet.innerHTML = "";
        csv.shift();
        csv.forEach(function(row){
            spreadsheet.innerHTML += "<tr>" +
                "<td>" + row.field2 + "</td>" +
                "<td>" + row.field3 + "</td>" +
                "<td>" + row.field4 + "</td>" +
                "<td>" + row.field5 + "</td>" +
                "<td>" + row.field6 + "</td>" +
                "<td>" + row.field7 + "</td>" +
                "<td>" + row.field8 + "</td>" +
                "<td>" + row.field9 + "</td>" +
                "<td>" + row.field10 + "</td>" +
                "</tr>";
        });
    });
</script>

</html>
